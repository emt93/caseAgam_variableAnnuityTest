# Variable Annuity Model
by Eric Tichbourne for __Agam Capital Management__

Description
- 
This is my submission for the Variable Annuity Model case that I was given based on the ING LifePay Plus Base policy.

Taking a step-back, here's a brief description of what a variable annuity is for readers who may have worked with these 
products before:

A variable annuity is a type of insurance contract that provides retirement or investment benefits. It is similar to a traditional fixed annuity, but instead of providing a fixed rate of return, it allows the policyholder to choose from a range of investment options, such as mutual funds, stocks, and bonds. The value of the policy's investments and the resulting payouts to the policyholder can vary depending on the performance of the underlying investments.

Variable annuities are typically used as a long-term savings and investment vehicle, and they often include additional features such as guaranteed minimum payouts, death benefits, and the option to convert to a fixed annuity at a later date. They may also include riders, or additional options that can be added to the policy for an additional cost, such as a long-term care rider or an income rider.

Variable annuities are generally more complex and risky than traditional fixed annuities, and they typically have higher fees and costs associated with them. They may not be suitable for all investors, and it is important to carefully consider the terms of the contract and the potential risks and rewards before purchasing a variable annuity.

Installation
- 
To get the model up and running one needs to run the pip freeze of the necessary packages as per the requirement.txt. 
This should take no longer than a couple of minutes to install these common python packages. All the versions have been 
tested and run as expected in this application. 

To run the script, one can run the main.py script which will execute the class with all the necessary parameters and assumptions as per those mentioned in the Excel and policy PDF.
If certain parameters/assumptions need to be changed one can do so in the main.py script. Changes to the variable_annuity_processor.py (i.e., the class script) should not be necessary unless new developments/implementations are needed since this script has been tested to 100% accuracy with the fixed Excel model.

Use at own risk as this is a toy model and should not be used to make investment/financial decisions.

Testing
- 
While developing this model based off of the ING LifePay Plus Base policy documentation and the Excel model that was provided, 
a few notable issues arose. 
1. The algorithm for the Maximum Annual Withdrawal Rate by Age appeared to not align with the logic as stated in the policy. The Excel formula was missing the equals sign as to include the lower bound age, so instead it was lagging the changes in the rate. See the benchmark file called 'Test VA Withdrawal_hardcodeFundReturns_fix.xlsx' for the corrected formula.
2. There may be some assumptions like:
   1. the number of potential funds to invest in (policy offers a few dozen options of funds to invest in).
   2. fund prospective return and risk characteristics,  not to mention the distribution selected that may under-estimate the risk
   3. the cost/fees and the table Maximum Annual Withdrawal Rates may be updated or change overtime. For instance, on page 30 of the policy PDF, it states that Maximum Annual Withdrawal Rates were slightly different for the product prior to January 12, 2009. 
3. Tested and validated that the results generated by the python model match those of the Excel model. See the model called create_check_output_table in the variableAnnuity class for more details.

Future Improvements
-
1. __More Funds__: A multivariate stochastic fund returns model could be helpful to model log-normal returns for various funds instead of the simple approach assumed here. Some code has already been to address this, so it would be a relatively minor refactor to implement this.
2. __Add new features__: Add a more detailed logger to the model. Raise exceptions if needed (e.g., it could be added to the divide_by tool for when we divided by zero).
3. __Add documentation__: Add method and function specific descriptions. In the interest of time, some of these comments/details are mentioned here.
4. __Reduce complexity and increase readability__: Simplifying the rider charges and phase algorithms. There were some todos left in the code since there were parts that were reviewed since the circular reference in the Excel sheet is not necessarily good to reproduce. In other words, there are some if-statements that are unnecessary, like for phase and how that factors into the Withdrawal Amount calculation. Since we can only be in one phase at a time, that logic can be simplified so that we avoid redundant if-statements. 

